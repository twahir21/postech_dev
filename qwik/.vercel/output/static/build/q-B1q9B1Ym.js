import{u as d}from"./q-Dk67VZbx.js";import{d as k}from"./q-Dk67VZbx.js";import{C as p}from"./q-DrN8Jx7F.js";import"./q-B4L2hSEC.js";const h=async()=>{var r,t;const[u,e]=d();if(!e.isLoading)try{if(e.isLoading=!0,!e.product.name||!e.product.priceSold||!e.product.stock||!e.product.minStock||!e.product.unit||!e.purchases.priceBought||e.category.length===0||e.supplier.length===0){e.modal={isOpen:!0,message:"Tafadhali jaza taarifa zote sahihi",isSuccess:!1};return}const s=Number(e.product.priceSold),o=Number(e.product.stock),i=Number(e.product.minStock),c=Number(e.purchases.priceBought);if(isNaN(s)||isNaN(o)||isNaN(i)||isNaN(c)){e.modal={isOpen:!0,message:"Tafadhali weka namba tu sehemu zinazohitajika",isSuccess:!1};return}const n={name:e.product.name,priceSold:s,stock:o,minStock:i,priceBought:c,unit:e.product.unit,categoryId:(r=e.category[0])==null?void 0:r.id,supplierId:(t=e.supplier[0])==null?void 0:t.id},a=await new p("products").create(n);if(u.qrCodeRefetch.value=!0,!a.success){e.modal={isOpen:!0,message:a.message||"Tatizo limejitokeza",isSuccess:!1};return}e.modal={isOpen:!0,message:a.message||"Umefanikiwa",isSuccess:!0}}catch(s){e.modal={isOpen:!0,message:s instanceof Error?s.message:"Tatizo limejitokeza",isSuccess:!1}}finally{e.isLoading=!1}};export{k as _hW,h as s_0jr4PZZKFSU};
