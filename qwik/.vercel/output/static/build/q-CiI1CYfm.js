import{u as l}from"./q-Dk67VZbx.js";import{d as T}from"./q-Dk67VZbx.js";import{C as t}from"./q-DrN8Jx7F.js";import{e as n}from"./q-B4L2hSEC.js";const k=async()=>{const[c,m,e]=l();if(!e.isLoading&&Object.values(e.valid).every(a=>a)){const a=e.isLogin?"login":"register";e.isLoading=!0;try{if(!e.isLogin){const r=await c();if(!r){e.modal={isOpen:!0,message:"Tafadhali hakiki reCAPTCHA!",isSuccess:!1};return}const d={token:r},o=await new t("verify-captcha").create(d);if(!o.success){e.modal={isOpen:!0,message:o.message||"Hujaruhusiwa reCAPTCHA imekuzuia",isSuccess:!1};return}}const s={...e.isLogin?{}:{name:e.name,phoneNumber:e.phoneNumber},email:e.email,username:e.username,password:e.password},i=await new t(a).create(s);if(!i.success){e.modal={isOpen:!0,message:i.message||"Hitilafu imetokea wakati wa kutuma",isSuccess:!1};return}e.modal={isOpen:!0,message:i.message||"Umefanikiwa",isSuccess:!0};const u=n.mode==="development"?n.frontendURL_DEV:n.frontendURL;m(`${u}/private`),e.name="",e.email="",e.username="",e.password="",e.phoneNumber="",e.errors={},e.valid={},e.showPassword=!1}catch(s){e.modal={isOpen:!0,message:s instanceof Error?s.message:"Tatizo la mtandao. Tafadhali jaribu tena",isSuccess:!1}}finally{e.isLoading=!1}}};export{T as _hW,k as s_QLTTdR7owWs};
