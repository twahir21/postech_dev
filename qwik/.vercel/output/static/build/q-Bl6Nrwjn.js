import{_ as n}from"./q-uemlvruI.js";import{T as c}from"./q-DUXUJoqu.js";import{_ as p,g as _,D as b,q as t,k as m,b as l,a as g,w as s,H as x,x as y}from"./q-Dk67VZbx.js";import{H as f}from"./q-C3PpI_hY.js";const T=()=>{p();const o=f(),u=_({query:{},isLoading:!0,productId:"",generatedAt:"",editableFields:{quantity:"1",saleType:"cash",discount:"0",description:"",typeDetected:"sales"},supplierId:"",calculatedTotal:0,showCalculator:!1,input:"",isSubmitting:!1,modal:{isOpen:!1,message:"",isSuccess:!1},customerId:"",customers:[]});b(t(()=>n(()=>import("./q-B9K6jb1D.js"),[]),"s_GU7Gqe9h6eA",[u])),m(t(()=>n(()=>import("./q-DaJHIDQ-.js"),[]),"s_ejF7VmNigQo",[o,u]));const a=t(()=>n(()=>import("./q-4JwBXnBc.js"),[]),"s_BJfjrRmdxqc",[u]),i=t(()=>n(()=>import("./q-Dih8FhL8.js"),[]),"s_pEfYpBhkl8A",[u]),r=t(()=>n(()=>import("./q-DGyGD8qV.js"),[]),"s_DVYXH8vCX20",[u]);return l("div",null,{class:"p-4 max-w-2xl mx-auto text-sm sm:text-base"},[l("h1",null,{class:"text-xl sm:text-2xl font-bold mb-4 text-gray-800"},"📦 Taarifa za bidhaa kutoka kwa QR Code",3,null),u.isLoading?l("p",null,{class:"text-gray-600"},"Loading...",3,"Kb_0"):Object.keys(u.query).length===0?l("p",null,{class:"text-red-500"},"❌ Hakuna query parameters zilizopatikana!",3,"Kb_1"):l("div",null,{class:"bg-white rounded-xl shadow-lg p-4 border border-gray-200 space-y-4"},[l("div",null,{class:"grid sm:grid-cols-2 gap-4"},[Object.entries(u.query).map(([e,d])=>["quantity","saleType","discount","description","priceSold","typeDetected"].includes(e)?null:l("div",null,null,[l("p",null,{class:"text-gray-500 font-medium"},e,1,null),l("p",null,{class:"text-gray-900 font-semibold"},decodeURIComponent(d),1,null)],1,e)),l("div",null,{class:"text-left mb-4"},[l("button",null,{class:"p-2 text-white rounded-full",onClick$:t(()=>n(()=>import("./q-n3VhlzBh.js"),[]),"s_aCzzcjvCjx0",[u])},"📱",3,null),u.showCalculator&&l("div",null,{class:"absolute inset-0 flex justify-evenly items-center bg-opacity-50 z-50"},l("div",null,{class:"bg-white p-6 rounded-lg shadow-lg w-80 relative border-2 border-b-blue-900"},[l("button",null,{class:"absolute top-2 right-2 text-gray-600 hover:text-red-600",onClick$:t(()=>n(()=>import("./q-C3pAjYG1.js"),[]),"s_7D8aFhww1OI",[u])},"✖",3,null),l("input",null,{type:"text",class:"w-full p-2 text-right text-xl border rounded mb-4",value:s(e=>e.input,[u]),disabled:!0},null,3,null),l("div",null,{class:"grid grid-cols-4 gap-2"},["7","8","9","/","4","5","6","*","1","2","3","-","0","C","=","+"].map(e=>l("button",{class:`p-4 rounded text-xl ${e==="C"?"bg-red-500 text-white":e==="="?"bg-gray-900 text-white":"bg-gray-200"}`,onClick$:t(()=>n(()=>import("./q-C3NctQCJ.js"),[]),"s_AT0cWG7Yj30",[e,r])},null,e,0,e)),1,null)],1,null),1,"Kb_2")],1,null)],1,null),l("div",null,{class:"relative inline-block group cursor-help"},[l("p",null,{class:"text-green-600 underline"},"ℹ️ Bonyeza hapa (Jinsi ya kuweka hisa)",3,null),l("div",null,{class:"absolute z-10 hidden group-hover:block bg-white border border-gray-300 text-sm text-gray-700 p-2 rounded-md shadow-md w-64 mt-2"},[l("p",null,null,["🟢 ",l("strong",null,null,"Robo",3,null)," = 0.25"],3,null),l("p",null,null,["🟢 ",l("strong",null,null,"Nusu",3,null)," = 0.5"],3,null),l("p",null,null,["🟢 ",l("strong",null,null,"Robotatu",3,null)," = 0.75"],3,null),l("p",null,null,["🟢 ",l("strong",null,null,"Kilo na nusu",3,null)," = 1.5"],3,null)],3,null)],3,null),l("div",null,{class:"border-t pt-4 grid sm:grid-cols-2 gap-4"},[l("div",null,null,[l("label",null,{class:"block text-gray-600 font-medium mb-1"},"Quantity",3,null),l("input",null,{type:"number",value:s(e=>e.editableFields.quantity,[u]),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300 text-lg font-bold text-green-600",onInput$:t(()=>n(()=>import("./q-CkqkFa19.js"),[]),"s_0pAzTJ1Hf8w",[a])},null,3,null)],3,null),l("div",null,null,[l("label",null,{class:"block text-gray-600 font-medium mb-1"},"Aina iliyoonekana",3,null),l("select",null,{value:s(e=>e.editableFields.typeDetected,[u]),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300",onChange$:t(()=>n(()=>import("./q-CCgPs_PF.js"),[]),"s_3kZSs0Qs9Jc",[a])},[l("option",null,{value:"sales"},"Mauzo",3,null),l("option",null,{value:"purchases"},"Manunuzi",3,null),l("option",null,{value:"expenses"},"Matumizi",3,null)],3,null)],3,null),l("div",null,null,[l("label",null,{class:"block text-gray-600 font-medium mb-1"},"Aina ya Mauzo",3,null),l("select",null,{value:s(e=>e.editableFields.saleType,[u]),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300",onChange$:t(()=>n(()=>import("./q-BEZMWIlu.js"),[]),"s_dhrDlze8E8E",[a])},[l("option",null,{value:"cash"},"Cash",3,null),l("option",null,{value:"debt"},"Deni",3,null)],3,null)],3,null),l("div",null,null,[l("label",null,{class:"block text-gray-600 font-medium mb-1"},"Punguzo (%)",3,null),l("input",null,{type:"number",value:s(e=>e.editableFields.discount,[u]),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300",onInput$:t(()=>n(()=>import("./q-D9rT4xvv.js"),[]),"s_J8F0VostN18",[a])},null,3,null)],3,null),u.editableFields.typeDetected==="expenses"&&l("div",null,{class:"sm:col-span-2"},[l("label",null,{class:"block text-gray-600 font-medium mb-1"},"Maelezo:",3,null),l("textarea",null,{value:s(e=>e.editableFields.description,[u]),rows:3,placeholder:"e.g. Nauli, chakula, bando, n.k. ...",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300",onInput$:t(()=>n(()=>import("./q-DMZYO77y.js"),[]),"s_NdDl6meDCtE",[a])},null,3,null)],3,"Kb_3"),u.editableFields.saleType==="debt"&&l("div",null,{class:"sm:col-span-2"},[l("p",null,{class:"text-gray-600 font-medium mb-2"},"Chagua Mteja:",3,null),u.customers.length>0?l("select",null,{value:s(e=>e.customerId||"",[u]),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300",onChange$:t(()=>n(()=>import("./q-0uhyWajv.js"),[]),"s_FGIIJbAH9eo",[u])},[l("option",null,{value:""},"-- Chagua mteja --",3,null),u.customers.map(e=>l("option",{value:x(e,"id")},null,e.name,1,e.id))],1,"Kb_4"):l("p",null,{class:"text-gray-500 italic"},"Hakuna mteja aliyepatikana.",3,null)],1,"Kb_5")],1,null),l("div",null,{class:"pt-4 text-center"},[l("p",null,{class:"text-2xl sm:text-3xl font-bold text-green-600"},["💰 Total: ",new Intl.NumberFormat("en-US").format(u.calculatedTotal),"/="],1,null),l("p",null,{class:"text-sm text-gray-500"},["(",s(e=>e.editableFields.quantity,[u])," × ",s(e=>e.query.priceSold,[u])," - ",s(e=>e.editableFields.discount,[u]),")"],3,null)],1,null),l("button",null,{disabled:s(e=>e.isSubmitting,[u]),class:"mt-4 w-full bg-gray-800 text-white py-2 px-4 rounded hover:bg-gray-400 transition duration-300 ease-in-out",onClick$:i},s(e=>e.isSubmitting?"Tafadhali subiri ":"Tuma muamala",[u]),3,null)],1,null),u.modal.isOpen&&g(c,{get isOpen(){return u.modal.isOpen},get type(){return u.modal.isSuccess},get message(){return u.modal.message},onClose$:t(()=>n(()=>import("./q-bYBWM4XQ.js"),[]),"s_vOn0lkiKdNY",[u]),[y]:{isOpen:s(e=>e.modal.isOpen,[u]),type:s(e=>e.modal.isSuccess,[u]),message:s(e=>e.modal.message,[u])}},2,"Kb_6")],1,"Kb_7")};export{T as s_ZS3S6i1DoNs};
